# PHPStan Configuration
# =========================================
#
# Root configuration for analyzing discovery package.
#
# ## Usage:
# Run PHPStan analysis:
#   vendor/bin/phpstan analyse

parameters:
    # =========================================================================
    # ANALYSIS PATHS
    # =========================================================================
    paths:
        - src

    # =========================================================================
    # STRICTNESS LEVEL
    # =========================================================================
    level: 8

    # =========================================================================
    # BUILD DIRECTORY
    # =========================================================================
    tmpDir: build/phpstan

    # =========================================================================
    # EXCLUDED PATHS
    # =========================================================================
    excludePaths:
        - */tests/*
        - */vendor/*
        - src/Strategies/DirectoryStrategy.php

    # =========================================================================
    # IGNORED ERROR PATTERNS
    # =========================================================================
    ignoreErrors:
        # Third-party packages (entire namespaces)
        - '#olvlvl\\#'
        - '#Illuminate\\#'
        - '#Laravel\\#'

        # Missing iterable type hints (utility classes - not critical)
        - '#has no value type specified in iterable type array#'
        - '#with no value type specified in iterable type array#'
        - '#does not specify its types#'

        # Type narrowing (PHPStan being overly strict)
        - '#Call to function is_string\(\) with string will always evaluate to true#'
        - '#Expression on left side of \?\? is not nullable#'

        # Known constants
        - '#Constant SP not found#'

        # Type compatibility (minor issues)
        - '#Parameter .* expects .*, .* given#'
        - '#should return .* but returns#'
        - '#Cannot call method .* on .*\|null#'
        - '#Property .* does not accept#'
